{"repository_name":"frightcrawler","body":"# frightcrawler\n[![Tests](https://github.com/charlesrocket/frightcrawler/actions/workflows/tests.yml/badge.svg?branch=master)](https://github.com/charlesrocket/frightcrawler/actions/workflows/tests.yml)\n\n```\n▓░░░█▀▀░█▀▀▄░░▀░░█▀▀▀░█░░░░▀█▀░\n▓░░░█▀░░█▄▄▀░░█▀░█░▀▄░█▀▀█░░█░░\n▓░░░▀░░░▀░▀▀░▀▀▀░▀▀▀▀░▀░░▀░░▀░░\n▓░█▀▄░█▀▀▄░█▀▀▄░█░░░█░█░░█▀▀░█▀▀▄\n▓░█░░░█▄▄▀░█▄▄█░▀▄█▄▀░█░░█▀▀░█▄▄▀\n▓░▀▀▀░▀░▀▀░▀░░▀░░▀░▀░░▀▀░▀▀▀░▀░▀▀\n```\n\n### Deck legality checker\n\n#### Usage\n\n```\nfrightcrawler -h\nfrightcrawler -g modern -f PATH/TO/FILE\n```\n","program":{"html_id":"frightcrawler/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"frightcrawler","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"T1","name":"T1","value":"Time.monotonic","doc":null,"summary":null},{"id":"T2","name":"T2","value":"Time.monotonic","doc":null,"summary":null},{"id":"VERSION","name":"VERSION","value":"{{ (`shards version \\\"/Users/charlie/Documents/git/frightcrawler/src\\\"`).chomp.stringify }}","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"frightcrawler/Bulk","path":"Bulk.html","kind":"class","full_name":"Bulk","name":"Bulk","abstract":false,"superclass":{"html_id":"frightcrawler/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"frightcrawler/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"frightcrawler/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/bulk.cr","line_number":1,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/bulk.cr#L1"}],"repository_name":"frightcrawler","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"html_id":"pull:Nil-class-method","name":"pull","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Nil","args_html":" : Nil","location":{"filename":"src/bulk.cr","line_number":2,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/bulk.cr#L2"},"def":{"name":"pull","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"bulk_data = JSON.parse((HTTP::Client.get(\"https://api.scryfall.com/bulk-data\")).body)\ndownload_link = bulk_data[\"data\"][3][\"download_uri\"]\nif File.exists?(\"bulk-data.json\")\n  local_time = Time.utc.to_unix\n  modification_time = (File.info(\"bulk-data.json\")).modification_time.to_unix\n  bulk_time = 86000\n  if (local_time - modification_time) >= bulk_time\n    puts(\"\\n  * Deleting old bulk data\")\n    File.delete(\"bulk-data.json\")\n  end\nend\nif !(File.exists?(\"bulk-data.json\"))\n  puts(\"\\n  * Downloading bulk data from Scryfall ...\")\n  HTTP::Client.get(\"#{download_link}\") do |response|\n    File.write(\"bulk-data.json\", response.body_io)\n  end\n  puts(\"\\n  * Bulk data downloaded\")\nend\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"frightcrawler/Counter","path":"Counter.html","kind":"class","full_name":"Counter","name":"Counter","abstract":false,"superclass":{"html_id":"frightcrawler/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"frightcrawler/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"frightcrawler/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/counter.cr","line_number":1,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L1"}],"repository_name":"frightcrawler","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"html_id":"banned(x)-class-method","name":"banned","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":57,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L57"},"def":{"name":"banned","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@banned = @@banned + x"}},{"html_id":"bonus(x)-class-method","name":"bonus","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":81,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L81"},"def":{"name":"bonus","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@bonus = @@bonus + x"}},{"html_id":"common(x)-class-method","name":"common","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":61,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L61"},"def":{"name":"common","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@common = @@common + x"}},{"html_id":"efoil(x)-class-method","name":"efoil","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":89,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L89"},"def":{"name":"efoil","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@efoil = @@efoil + x"}},{"html_id":"foil(x)-class-method","name":"foil","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":85,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L85"},"def":{"name":"foil","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@foil = @@foil + x"}},{"html_id":"get_banned-class-method","name":"get_banned","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":113,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L113"},"def":{"name":"get_banned","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@banned"}},{"html_id":"get_bonus-class-method","name":"get_bonus","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":137,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L137"},"def":{"name":"get_bonus","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@bonus"}},{"html_id":"get_common-class-method","name":"get_common","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":117,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L117"},"def":{"name":"get_common","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@common"}},{"html_id":"get_efoil-class-method","name":"get_efoil","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":145,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L145"},"def":{"name":"get_efoil","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@efoil"}},{"html_id":"get_foil-class-method","name":"get_foil","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":141,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L141"},"def":{"name":"get_foil","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@foil"}},{"html_id":"get_legal-class-method","name":"get_legal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":101,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L101"},"def":{"name":"get_legal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@legal"}},{"html_id":"get_mythic-class-method","name":"get_mythic","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":133,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L133"},"def":{"name":"get_mythic","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@mythic"}},{"html_id":"get_not_legal-class-method","name":"get_not_legal","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":105,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L105"},"def":{"name":"get_not_legal","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@not_legal"}},{"html_id":"get_rare-class-method","name":"get_rare","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":125,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L125"},"def":{"name":"get_rare","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@rare"}},{"html_id":"get_restricted-class-method","name":"get_restricted","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":109,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L109"},"def":{"name":"get_restricted","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@restricted"}},{"html_id":"get_special-class-method","name":"get_special","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":129,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L129"},"def":{"name":"get_special","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@special"}},{"html_id":"get_total-class-method","name":"get_total","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":93,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L93"},"def":{"name":"get_total","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@total_count"}},{"html_id":"get_uncommon-class-method","name":"get_uncommon","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":121,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L121"},"def":{"name":"get_uncommon","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@uncommon"}},{"html_id":"get_unique-class-method","name":"get_unique","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":97,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L97"},"def":{"name":"get_unique","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@unique_count"}},{"html_id":"legal(x)-class-method","name":"legal","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":45,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L45"},"def":{"name":"legal","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@legal = @@legal + x"}},{"html_id":"mythic(x)-class-method","name":"mythic","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":77,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L77"},"def":{"name":"mythic","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@mythic = @@mythic + x"}},{"html_id":"not_legal(x)-class-method","name":"not_legal","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":49,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L49"},"def":{"name":"not_legal","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@not_legal = @@not_legal + x"}},{"html_id":"output-class-method","name":"output","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":19,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L19"},"def":{"name":"output","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"puts(\"\\n  Legal: #{Counter.get_legal.colorize(:green)}\")\nputs(\"  Not legal: #{Counter.get_not_legal.colorize(:red)}\")\nputs(\"  Restricted: #{Counter.get_restricted.colorize(:blue)}\")\nputs(\"  Banned: #{Counter.get_banned.colorize(:red)}\")\nputs(\"\\n  | ▲ #{Counter.get_foil}\")\nputs(\"  | ◭ #{Counter.get_efoil}\")\nputs(\"\\n  | C #{Counter.get_common.colorize(:white)}\")\nputs(\"  | U #{Counter.get_uncommon.colorize(:cyan)}\")\nputs(\"  | R #{Counter.get_rare.colorize(:light_yellow)}\")\nputs(\"  | S #{Counter.get_special.colorize(:yellow)}\")\nputs(\"  | M #{Counter.get_mythic.colorize(:magenta)}\")\nputs(\"  | B #{Counter.get_bonus.colorize(:light_blue)}\")\nputs(\"\\n  Unique/total processed: #{Counter.get_unique}/#{Counter.get_total}\")\nputs(\"  Elapsed time: #{T2 - T1}\")\nputs(\"\\nDONE\")\n"}},{"html_id":"rare(x)-class-method","name":"rare","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":69,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L69"},"def":{"name":"rare","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@rare = @@rare + x"}},{"html_id":"reset-class-method","name":"reset","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":149,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L149"},"def":{"name":"reset","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@total_count = 0\n@@unique_count = 0\n@@legal = 0\n@@not_legal = 0\n@@restricted = 0\n@@banned = 0\n@@common = 0\n@@uncommon = 0\n@@rare = 0\n@@special = 0\n@@mythic = 0\n@@bonus = 0\n@@foil = 0\n@@efoil = 0\n"}},{"html_id":"restricted(x)-class-method","name":"restricted","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":53,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L53"},"def":{"name":"restricted","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@restricted = @@restricted + x"}},{"html_id":"special(x)-class-method","name":"special","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":73,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L73"},"def":{"name":"special","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@special = @@special + x"}},{"html_id":"total(x)-class-method","name":"total","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":37,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L37"},"def":{"name":"total","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@total_count = @@total_count + x"}},{"html_id":"uncommon(x)-class-method","name":"uncommon","doc":null,"summary":null,"abstract":false,"args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"args_string":"(x)","args_html":"(x)","location":{"filename":"src/counter.cr","line_number":65,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L65"},"def":{"name":"uncommon","args":[{"name":"x","doc":null,"default_value":"","external_name":"x","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@uncommon = @@uncommon + x"}},{"html_id":"unique-class-method","name":"unique","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/counter.cr","line_number":41,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/counter.cr#L41"},"def":{"name":"unique","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@unique_count = @@unique_count + 1"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"frightcrawler/Crawler","path":"Crawler.html","kind":"struct","full_name":"Crawler","name":"Crawler","abstract":false,"superclass":{"html_id":"frightcrawler/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"frightcrawler/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"frightcrawler/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"frightcrawler/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/engine.cr","line_number":1,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L1"}],"repository_name":"frightcrawler","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"html_id":"card_info(z):String-class-method","name":"card_info","doc":"Returns card info for provided Scryfall ID","summary":"<p>Returns card info for provided Scryfall ID</p>","abstract":false,"args":[{"name":"z","doc":null,"default_value":"","external_name":"z","restriction":""}],"args_string":"(z) : String","args_html":"(z) : String","location":{"filename":"src/engine.cr","line_number":146,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L146"},"def":{"name":"card_info","args":[{"name":"z","doc":null,"default_value":"","external_name":"z","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"Log.info do\n  \"Card info requested (#{z})\"\nend\n(JSON.parse((HTTP::Client.get(\"https://api.scryfall.com/cards/#{z}\")).body)).to_pretty_json\n"}},{"html_id":"csv_layout(file):String-class-method","name":"csv_layout","doc":"Checks if CSV file is supported","summary":"<p>Checks if CSV file is supported</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""}],"args_string":"(file) : String","args_html":"(file) : String","location":{"filename":"src/engine.cr","line_number":9,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L9"},"def":{"name":"csv_layout","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@@csv_aetherhub = @@csv_helvault = @@csv_helvaultpro = false\ncsv_file = File.read(file)\ncardlist = CSV.new(csv_file, headers: true)\ncsv_header = cardlist.headers.to_s\nif csv_header.includes?(\"\\\"extras\\\", \\\"language\\\", \\\"name\\\", \\\"quantity\\\", \\\"scryfall_id\\\"\")\n  @@csv_helvault = true\n  puts(\"\\n  * Helvault CSV file loaded\")\n  \"helvault file\"\nelse\n  if csv_header.includes?(\"\\\"collector_number\\\", \\\"estimated_price\\\", \\\"extras\\\", \\\"language\\\"\")\n    @@csv_helvaultpro = true\n    puts(\"\\n  * Helvault Pro CSV file loaded\")\n    \"helvault pro file\"\n  else\n    if csv_header.includes?(\"AetherHub Card Id\")\n      @@csv_aetherhub = true\n      puts(\"\\n  * AetherHub CSV file loaded\")\n      \"aetherhub file\"\n    else\n      raise(\"Unsupported CSV layout\")\n    end\n  end\nend\n"}},{"html_id":"foils(foil_status,quantity):Colorize::Object(Symbol)-class-method","name":"foils","doc":"Sets foil status","summary":"<p>Sets foil status</p>","abstract":false,"args":[{"name":"foil_status","doc":null,"default_value":"","external_name":"foil_status","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"args_string":"(foil_status, quantity) : Colorize::Object(Symbol)","args_html":"(foil_status, quantity) : Colorize::Object(Symbol)","location":{"filename":"src/engine.cr","line_number":130,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L130"},"def":{"name":"foils","args":[{"name":"foil_status","doc":null,"default_value":"","external_name":"foil_status","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Colorize::Object(Symbol)","visibility":"Public","body":"case\nwhen foil_status == \"1\", foil_status == \"foil\"\n  Counter.foil(\"#{quantity}\".to_i)\n  (:\"▲\").colorize(:light_gray)\nwhen foil_status == \"etchedFoil\"\n  Counter.efoil(\"#{quantity}\".to_i)\n  (:\"◭\").colorize(:light_gray)\nwhen foil_status == \"0\", foil_status == \"\"\n  (:\"△\").colorize(:dark_gray)\nelse\n  raise(\"ERROR: foil_status\")\nend"}},{"html_id":"legalities(json,game_format,quantity):Colorize::Object(String)|String-class-method","name":"legalities","doc":"Sets legality status","summary":"<p>Sets legality status</p>","abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"game_format","doc":null,"default_value":"","external_name":"game_format","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"args_string":"(json, game_format, quantity) : Colorize::Object(String) | String","args_html":"(json, game_format, quantity) : Colorize::Object(String) | String","location":{"filename":"src/engine.cr","line_number":80,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L80"},"def":{"name":"legalities","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"game_format","doc":null,"default_value":"","external_name":"game_format","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Colorize::Object(String) | String","visibility":"Public","body":"case\nwhen json[\"legalities\"][game_format] == \"legal\"\n  @@legality_stat = \"LEGAL\"\n  Counter.legal(\"#{quantity}\".to_i)\n  \"  Legal   \".colorize(:green)\nwhen json[\"legalities\"][game_format] == \"not_legal\"\n  @@legality_stat = \"NOT LEGAL\"\n  Counter.not_legal(\"#{quantity}\".to_i)\n  \"Not legal \".colorize(:red)\nwhen json[\"legalities\"][game_format] == \"restricted\"\n  @@legality_stat = \"RESTRICTED\"\n  Counter.restricted(\"#{quantity}\".to_i)\n  \"  Restr   \".colorize(:blue)\nwhen json[\"legalities\"][game_format] == \"banned\"\n  @@legality_stat = \"BANNED\"\n  Counter.banned(\"#{quantity}\".to_i)\n  \"   BAN    \".colorize(:red)\nelse\n  raise(\"ERROR: legalities\")\nend"}},{"html_id":"rarities(json,quantity):Colorize::Object(Symbol)-class-method","name":"rarities","doc":"Sets rarity status","summary":"<p>Sets rarity status</p>","abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"args_string":"(json, quantity) : Colorize::Object(Symbol)","args_html":"(json, quantity) : Colorize::Object(Symbol)","location":{"filename":"src/engine.cr","line_number":104,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L104"},"def":{"name":"rarities","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"quantity","doc":null,"default_value":"","external_name":"quantity","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Colorize::Object(Symbol)","visibility":"Public","body":"case\nwhen json[\"rarity\"] == \"common\"\n  Counter.common(\"#{quantity}\".to_i)\n  (:C).colorize(:white)\nwhen json[\"rarity\"] == \"uncommon\"\n  Counter.uncommon(\"#{quantity}\".to_i)\n  (:U).colorize(:cyan)\nwhen json[\"rarity\"] == \"rare\"\n  Counter.rare(\"#{quantity}\".to_i)\n  (:R).colorize(:light_yellow)\nwhen json[\"rarity\"] == \"special\"\n  Counter.special(\"#{quantity}\".to_i)\n  (:S).colorize(:yellow)\nwhen json[\"rarity\"] == \"mythic\"\n  Counter.mythic(\"#{quantity}\".to_i)\n  (:M).colorize(:magenta)\nwhen json[\"rarity\"] == \"bonus\"\n  Counter.bonus(\"#{quantity}\".to_i)\n  (:B).colorize(:light_blue)\nelse\n  raise(\"ERROR: rarity\")\nend"}},{"html_id":"validate_csv(file,game_format):String-class-method","name":"validate_csv","doc":"Validates CSV file against provided format","summary":"<p>Validates CSV file against provided format</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""},{"name":"game_format","doc":null,"default_value":"","external_name":"game_format","restriction":""}],"args_string":"(file, game_format) : String","args_html":"(file, game_format) : String","location":{"filename":"src/engine.cr","line_number":32,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L32"},"def":{"name":"validate_csv","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":""},{"name":"game_format","doc":null,"default_value":"","external_name":"game_format","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"Crawler.csv_layout(file)\ncsv_file = File.read(file)\ncardlist = CSV.new(csv_file, headers: true)\nif File.exists?(\"bulk-data.json\")\nelse\n  Bulk.pull\nend\nputs(\"\\n  * Loading bulk data ...\")\nbulk_json = JSON.parse(File.read(\"bulk-data.json\"))\nputs(\"\\n  * Bulk data loaded\")\nputs(\"\\n  * Reading CSV file ...\", \"\\n\")\ncardlist.each do |entry|\n  row = entry.row.to_a\n  x = 0\n  case\n  when @@csv_helvault\n    scry_id = row[4]\n    foil_status = row[0]\n    quantity = row[3]\n  when @@csv_helvaultpro\n    scry_id = row[8]\n    foil_status = row[2]\n    quantity = row[6]\n  when @@csv_aetherhub\n    scry_id = row[13]\n    foil_status = row[7]\n    quantity = row[6]\n  else\n    raise(\"ERROR: csv\")\n  end\n  while !(bulk_json[x][\"id\"] == \"#{scry_id}\")\n    x = x + 1\n  end\n  id_json = bulk_json[x]\n  card_name = id_json[\"name\"]\n  set_name = id_json[\"set_name\"]\n  set_code = id_json[\"set\"].to_s.upcase.colorize.mode(:underline)\n  Counter.total(\"#{quantity}\".to_i)\n  Counter.unique\n  puts(\"▓▒░░░  #{legalities(id_json, game_format, quantity)} #{foils(foil_status, quantity)} #{rarities(id_json, quantity)} #{card_name} ⬡ #{set_name} ◄ #{set_code} ►\")\n  Log.info do\n    \"#{game_format}: #{@@legality_stat} #{card_name} ◄ #{set_name} ► ⑇ #{quantity}\"\n  end\nend\n\"validated\"\n"}}],"constructors":[{"html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/engine.cr","line_number":1,"url":"https://github.com/charlesrocket/frightcrawler/blob/6c16ce39d036dea423575331986c08816d05c739/src/engine.cr#L1"},"def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"}}],"instance_methods":[],"macros":[],"types":[]}]}}